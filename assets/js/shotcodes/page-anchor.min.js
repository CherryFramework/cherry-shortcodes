!function(t){"use strict";t.extend(t.expr[":"],{position_fixed:function(o){return"fixed"===t(o).css("position")}}),CHERRY_API.utilites.namespace("shortcode.row.page_anchor"),CHERRY_API.shortcode.row.page_anchor={$window:CHERRY_API.variable.$window,html_body:t("html, body"),wp_menu:".menu",wp_menu_item:".menu-item-type-custom",speed:anchor_scroll_speed,anchors:{},items:t("[data-anchor][data-id]"),window_height:0,do_animation:!0,timer:null,temp_anchor:"",init:function(){CHERRY_API.status.is_ready?this.events.do_script():CHERRY_API.variable.$document.ready(this.do_script.bind(this))},do_script:function(){this.set_page_anchor(),t(this.wp_menu_item,this.wp_menu).on("click",'a[href^="#"]',this.on_anchor_change),this.$window.on("resize.page_anchor",t.proxy(this.set_window_height,this)).on("mousedown.page_anchor",t.proxy(this.on_mousedown,this)).on("mouseup.page_anchor",t.proxy(this.on_mouseup,this)).on("hashchange.page_anchor",t.proxy(this.on_anchor_change,this)).on("hashchange.page_anchor",t.proxy(this.set_activ_button,this)).on("scroll.page_anchor",t.proxy(this.on_scroll,this)).trigger("resize.page_anchor"),"onwheel"in document?window.addEventListener("wheel",t.proxy(this.on_wheel,this)):"onmousewheel"in document?window.addEventListener("mousewheel",t.proxy(this.on_wheel,this)):"ontouchmove"in document&&window.addEventListener("touchmove",t.proxy(this.on_wheel,this),!1),this.on_anchor_change(),this.set_activ_button()},on_mousedown:function(){this.do_animation=!1},on_mouseup:function(){this.do_animation=!0},on_anchor_change:function(){var o,n="",i=null,e=0,a=CHERRY_API.shortcode.row.page_anchor;n=this===a?window.location.hash.slice(1):t(this).attr("href").slice(1),a.do_animation&&(a.do_animation=!1,i=a.get_target_offset(t('[data-anchor][data-id="'+n+'"]')),i&&(e=a.$window.scrollTop(),o=a.speed*(Math.abs(i-e)/a.window_height),a.animation_stop().html_body.animate({scrollTop:i},o,"linear",function(){a.do_animation=!0})))},on_wheel:function(){var t=this;t.do_animation=!1,t.animation_stop(),clearTimeout(t.timer),this.timer=setTimeout(function(){t.do_animation=!0},100)},set_activ_button:function(){t(".current-menu-item, .current_page_item",this.wp_menu).removeClass("current-menu-item current_page_item"),t(this.wp_menu_item+' a[href$="'+window.location.hash+'"]',this.wp_menu).parent().addClass("current-menu-item current_page_item")},set_window_height:function(){this.window_height=window.innerHeight,this.set_page_anchor()},on_scroll:function(){{var t,o=this;this.do_animation}for(t in this.anchors)this.anchors.hasOwnProperty(t)&&o.in_viewport(t)&&t!==this.temp_anchor&&(this.temp_anchor=t,window.location.hash=t)},set_page_anchor:function(){var o=this;o.items.each(function(){var n=t(this);o.anchors[n.data("id")]=[o.get_target_offset(n),n.outerHeight()]})},animation_stop:function(){return this.html_body.stop().clearQueue(),this},get_target_offset:function(o){var n=0;if(sticky_data.args.active){var i=t(sticky_data.selector);n=o[0]?o.offset().top-i.outerHeight()-i.position().top:!1}else n=o[0]?o.offset().top:!1;return Math.round(n)},in_viewport:function(t){var o=this.anchors[t][0],n=this.anchors[t][2],i=this.$window.scrollTop(),e=i+this.window_height/2;return o>i&&e>o||n>i&&e>n?!0:!1}},CHERRY_API.shortcode.row.page_anchor.init()}(jQuery);